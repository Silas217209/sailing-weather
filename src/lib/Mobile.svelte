<script lang="ts">
	import { page } from '$app/stores';
	export let weatherdata = {
		latitude: 52.52,
		longitude: 13.419998,
		generationtime_ms: 0.9279251098632812,
		utc_offset_seconds: 7200,
		elevation: 38.0,
		current_weather: {
			temperature: 18.0,
			windspeed: 6.1,
			winddirection: 288.0,
			weathercode: 3.0,
			time: '2022-07-17T12:00',
		},
		hourly_units: {
			time: 'iso8601',
			temperature_2m: '°C',
			relativehumidity_2m: '%',
			surface_pressure: 'hPa',
			precipitation: 'mm',
			weathercode: 'wmo code',
			windspeed_10m: 'kn',
			winddirection_10m: '°',
			windgusts_10m: 'kn',
		},
		hourly: {
			time: [
				'2022-07-12T00:00',
				'2022-07-12T01:00',
				'2022-07-12T02:00',
				'2022-07-12T03:00',
				'2022-07-12T04:00',
				'2022-07-12T05:00',
				'2022-07-12T06:00',
				'2022-07-12T07:00',
				'2022-07-12T08:00',
				'2022-07-12T09:00',
				'2022-07-12T10:00',
				'2022-07-12T11:00',
				'2022-07-12T12:00',
				'2022-07-12T13:00',
				'2022-07-12T14:00',
				'2022-07-12T15:00',
				'2022-07-12T16:00',
				'2022-07-12T17:00',
				'2022-07-12T18:00',
				'2022-07-12T19:00',
				'2022-07-12T20:00',
				'2022-07-12T21:00',
				'2022-07-12T22:00',
				'2022-07-12T23:00',
				'2022-07-13T00:00',
				'2022-07-13T01:00',
				'2022-07-13T02:00',
				'2022-07-13T03:00',
				'2022-07-13T04:00',
				'2022-07-13T05:00',
				'2022-07-13T06:00',
				'2022-07-13T07:00',
				'2022-07-13T08:00',
				'2022-07-13T09:00',
				'2022-07-13T10:00',
				'2022-07-13T11:00',
				'2022-07-13T12:00',
				'2022-07-13T13:00',
				'2022-07-13T14:00',
				'2022-07-13T15:00',
				'2022-07-13T16:00',
				'2022-07-13T17:00',
				'2022-07-13T18:00',
				'2022-07-13T19:00',
				'2022-07-13T20:00',
				'2022-07-13T21:00',
				'2022-07-13T22:00',
				'2022-07-13T23:00',
				'2022-07-14T00:00',
				'2022-07-14T01:00',
				'2022-07-14T02:00',
				'2022-07-14T03:00',
				'2022-07-14T04:00',
				'2022-07-14T05:00',
				'2022-07-14T06:00',
				'2022-07-14T07:00',
				'2022-07-14T08:00',
				'2022-07-14T09:00',
				'2022-07-14T10:00',
				'2022-07-14T11:00',
				'2022-07-14T12:00',
				'2022-07-14T13:00',
				'2022-07-14T14:00',
				'2022-07-14T15:00',
				'2022-07-14T16:00',
				'2022-07-14T17:00',
				'2022-07-14T18:00',
				'2022-07-14T19:00',
				'2022-07-14T20:00',
				'2022-07-14T21:00',
				'2022-07-14T22:00',
				'2022-07-14T23:00',
				'2022-07-15T00:00',
				'2022-07-15T01:00',
				'2022-07-15T02:00',
				'2022-07-15T03:00',
				'2022-07-15T04:00',
				'2022-07-15T05:00',
				'2022-07-15T06:00',
				'2022-07-15T07:00',
				'2022-07-15T08:00',
				'2022-07-15T09:00',
				'2022-07-15T10:00',
				'2022-07-15T11:00',
				'2022-07-15T12:00',
				'2022-07-15T13:00',
				'2022-07-15T14:00',
				'2022-07-15T15:00',
				'2022-07-15T16:00',
				'2022-07-15T17:00',
				'2022-07-15T18:00',
				'2022-07-15T19:00',
				'2022-07-15T20:00',
				'2022-07-15T21:00',
				'2022-07-15T22:00',
				'2022-07-15T23:00',
				'2022-07-16T00:00',
				'2022-07-16T01:00',
				'2022-07-16T02:00',
				'2022-07-16T03:00',
				'2022-07-16T04:00',
				'2022-07-16T05:00',
				'2022-07-16T06:00',
				'2022-07-16T07:00',
				'2022-07-16T08:00',
				'2022-07-16T09:00',
				'2022-07-16T10:00',
				'2022-07-16T11:00',
				'2022-07-16T12:00',
				'2022-07-16T13:00',
				'2022-07-16T14:00',
				'2022-07-16T15:00',
				'2022-07-16T16:00',
				'2022-07-16T17:00',
				'2022-07-16T18:00',
				'2022-07-16T19:00',
				'2022-07-16T20:00',
				'2022-07-16T21:00',
				'2022-07-16T22:00',
				'2022-07-16T23:00',
				'2022-07-17T00:00',
				'2022-07-17T01:00',
				'2022-07-17T02:00',
				'2022-07-17T03:00',
				'2022-07-17T04:00',
				'2022-07-17T05:00',
				'2022-07-17T06:00',
				'2022-07-17T07:00',
				'2022-07-17T08:00',
				'2022-07-17T09:00',
				'2022-07-17T10:00',
				'2022-07-17T11:00',
				'2022-07-17T12:00',
				'2022-07-17T13:00',
				'2022-07-17T14:00',
				'2022-07-17T15:00',
				'2022-07-17T16:00',
				'2022-07-17T17:00',
				'2022-07-17T18:00',
				'2022-07-17T19:00',
				'2022-07-17T20:00',
				'2022-07-17T21:00',
				'2022-07-17T22:00',
				'2022-07-17T23:00',
				'2022-07-18T00:00',
				'2022-07-18T01:00',
				'2022-07-18T02:00',
				'2022-07-18T03:00',
				'2022-07-18T04:00',
				'2022-07-18T05:00',
				'2022-07-18T06:00',
				'2022-07-18T07:00',
				'2022-07-18T08:00',
				'2022-07-18T09:00',
				'2022-07-18T10:00',
				'2022-07-18T11:00',
				'2022-07-18T12:00',
				'2022-07-18T13:00',
				'2022-07-18T14:00',
				'2022-07-18T15:00',
				'2022-07-18T16:00',
				'2022-07-18T17:00',
				'2022-07-18T18:00',
				'2022-07-18T19:00',
				'2022-07-18T20:00',
				'2022-07-18T21:00',
				'2022-07-18T22:00',
				'2022-07-18T23:00',
				'2022-07-19T00:00',
				'2022-07-19T01:00',
				'2022-07-19T02:00',
				'2022-07-19T03:00',
				'2022-07-19T04:00',
				'2022-07-19T05:00',
				'2022-07-19T06:00',
				'2022-07-19T07:00',
				'2022-07-19T08:00',
				'2022-07-19T09:00',
				'2022-07-19T10:00',
				'2022-07-19T11:00',
				'2022-07-19T12:00',
				'2022-07-19T13:00',
				'2022-07-19T14:00',
				'2022-07-19T15:00',
				'2022-07-19T16:00',
				'2022-07-19T17:00',
				'2022-07-19T18:00',
				'2022-07-19T19:00',
				'2022-07-19T20:00',
				'2022-07-19T21:00',
				'2022-07-19T22:00',
				'2022-07-19T23:00',
			],
			temperature_2m: [
				16.4, 15.4, 13.9, 13.4, 12.9, 12.1, 12.1, 13.2, 15.7, 17.7, 19.8, 22.4, 23.4, 23.8, 24.6,
				25.1, 25.9, 26.4, 25.8, 25.7, 25.4, 23.9, 22.0, 20.5, 19.4, 18.3, 17.0, 16.4, 16.4, 16.5,
				16.6, 17.4, 19.2, 20.9, 22.2, 23.3, 24.3, 25.2, 27.5, 28.2, 28.3, 29.9, 29.6, 29.3, 28.8,
				26.9, 25.0, 23.9, 22.3, 21.0, 20.2, 19.0, 17.4, 16.6, 15.9, 15.6, 16.2, 17.2, 18.5, 19.9,
				21.3, 22.3, 23.0, 23.7, 23.9, 23.7, 22.9, 21.9, 21.3, 20.0, 18.5, 17.6, 16.3, 15.3, 15.0,
				14.0, 13.0, 12.6, 12.2, 12.7, 14.3, 15.9, 17.3, 17.5, 17.4, 19.1, 18.1, 19.1, 19.6, 19.9,
				19.7, 19.9, 19.4, 18.7, 17.8, 16.8, 15.9, 15.3, 15.4, 15.2, 14.9, 14.9, 14.8, 15.1, 16.0,
				14.6, 16.7, 17.4, 18.8, 19.4, 20.6, 20.4, 20.7, 21.4, 20.5, 20.4, 20.1, 19.0, 17.5, 16.4,
				15.3, 14.2, 13.2, 12.5, 11.8, 10.9, 10.6, 11.2, 13.0, 14.2, 15.9, 17.3, 18.0, 19.2, 20.9,
				21.9, 22.4, 22.9, 23.0, 22.8, 22.1, 21.1, 19.8, 18.7, 17.6, 16.8, 16.5, 16.1, 15.8, 15.6,
				15.5, 16.1, 17.8, 19.9, 21.7, 23.2, 24.4, 25.5, 26.5, 27.4, 27.7, 27.4, 27.4, 27.2, 26.6,
				25.6, 23.8, 22.4, 21.4, 20.7, 20.1, 19.4, 18.8, 18.3, 18.0, 18.8, 20.8, 23.5, 26.2, 28.7,
				30.7, 32.1, 33.2, 33.9, 34.2, 34.2, 34.0, 33.6, 32.7, 30.5, 27.9, 26.2,
			],
			relativehumidity_2m: [
				67.0, 71.0, 81.0, 81.0, 83.0, 87.0, 86.0, 80.0, 65.0, 56.0, 53.0, 40.0, 37.0, 37.0, 32.0,
				32.0, 31.0, 32.0, 34.0, 35.0, 32.0, 38.0, 47.0, 52.0, 58.0, 62.0, 67.0, 69.0, 72.0, 73.0,
				74.0, 71.0, 64.0, 58.0, 53.0, 50.0, 49.0, 45.0, 34.0, 36.0, 33.0, 25.0, 26.0, 29.0, 30.0,
				41.0, 42.0, 47.0, 54.0, 59.0, 60.0, 63.0, 71.0, 77.0, 78.0, 74.0, 69.0, 61.0, 53.0, 41.0,
				35.0, 35.0, 34.0, 31.0, 30.0, 31.0, 31.0, 34.0, 35.0, 40.0, 47.0, 52.0, 60.0, 65.0, 63.0,
				69.0, 74.0, 74.0, 77.0, 76.0, 71.0, 59.0, 49.0, 50.0, 52.0, 42.0, 48.0, 41.0, 42.0, 40.0,
				42.0, 41.0, 44.0, 48.0, 54.0, 58.0, 63.0, 66.0, 70.0, 71.0, 74.0, 71.0, 67.0, 63.0, 65.0,
				81.0, 70.0, 62.0, 51.0, 43.0, 36.0, 37.0, 34.0, 33.0, 36.0, 37.0, 37.0, 42.0, 48.0, 53.0,
				59.0, 63.0, 66.0, 69.0, 72.0, 76.0, 77.0, 75.0, 70.0, 66.0, 57.0, 51.0, 49.0, 46.0, 43.0,
				42.0, 37.0, 36.0, 38.0, 35.0, 39.0, 45.0, 51.0, 55.0, 63.0, 65.0, 66.0, 66.0, 67.0, 68.0,
				69.0, 70.0, 63.0, 55.0, 49.0, 45.0, 43.0, 40.0, 37.0, 36.0, 36.0, 36.0, 32.0, 33.0, 37.0,
				42.0, 49.0, 57.0, 60.0, 59.0, 60.0, 63.0, 65.0, 64.0, 63.0, 61.0, 53.0, 43.0, 36.0, 31.0,
				27.0, 25.0, 22.0, 21.0, 20.0, 20.0, 21.0, 21.0, 24.0, 32.0, 39.0, 41.0,
			],
			surface_pressure: [
				1017.2, 1017.4, 1018.0, 1018.3, 1018.6, 1018.6, 1018.2, 1018.2, 1018.8, 1018.7, 1018.8,
				1018.1, 1017.7, 1018.0, 1017.6, 1017.9, 1017.7, 1017.2, 1016.9, 1016.6, 1016.3, 1016.6,
				1017.0, 1017.0, 1016.6, 1017.0, 1017.3, 1016.4, 1016.1, 1015.9, 1015.2, 1015.4, 1015.0,
				1014.5, 1014.0, 1014.0, 1014.0, 1013.7, 1012.4, 1012.2, 1011.3, 1011.2, 1010.4, 1010.0,
				1009.7, 1010.6, 1011.5, 1012.3, 1012.0, 1012.1, 1013.0, 1012.8, 1013.2, 1013.6, 1013.6,
				1014.0, 1014.0, 1014.3, 1013.8, 1013.7, 1013.0, 1012.2, 1012.3, 1010.9, 1010.9, 1010.5,
				1010.5, 1010.4, 1010.9, 1010.8, 1011.5, 1012.0, 1012.5, 1012.7, 1013.3, 1013.4, 1013.4,
				1013.3, 1013.7, 1014.0, 1014.1, 1014.4, 1014.5, 1014.7, 1014.9, 1014.8, 1015.1, 1014.7,
				1014.8, 1015.0, 1014.7, 1014.4, 1014.4, 1014.0, 1014.2, 1014.5, 1014.3, 1014.2, 1014.1,
				1014.0, 1013.4, 1012.4, 1011.8, 1011.5, 1011.5, 1011.9, 1012.3, 1012.3, 1012.9, 1014.1,
				1013.7, 1014.7, 1015.1, 1015.2, 1015.6, 1015.9, 1016.8, 1017.4, 1018.0, 1019.0, 1020.1,
				1020.4, 1020.8, 1021.0, 1020.7, 1020.7, 1021.2, 1022.0, 1021.6, 1021.7, 1021.9, 1022.1,
				1022.3, 1022.4, 1021.9, 1021.3, 1021.1, 1021.0, 1020.8, 1020.5, 1020.3, 1020.6, 1020.9,
				1021.0, 1020.9, 1021.0, 1021.1, 1021.2, 1020.9, 1020.6, 1020.5, 1020.7, 1020.6, 1020.9,
				1020.7, 1020.5, 1020.2, 1019.8, 1019.3, 1018.7, 1018.2, 1017.8, 1017.5, 1017.3, 1017.0,
				1016.8, 1016.4, 1016.2, 1016.2, 1016.2, 1016.2, 1015.9, 1015.6, 1015.5, 1015.7, 1015.9,
				1015.9, 1015.7, 1015.6, 1015.3, 1015.1, 1014.7, 1014.2, 1013.9, 1013.7, 1013.3, 1012.9,
				1012.9, 1012.9, 1013.1, 1013.1, 1013.1,
			],
			precipitation: [
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.4, 1.6, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
			],
			weathercode: [
				1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.0, 3.0, 2.0, 2.0, 2.0, 1.0,
				0.0, 1.0, 0.0, 3.0, 3.0, 3.0, 3.0, 3.0, 1.0, 3.0, 3.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
				3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 3.0, 3.0, 2.0, 2.0, 3.0,
				3.0, 3.0, 3.0, 2.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.0, 3.0, 3.0, 1.0, 1.0, 1.0, 2.0, 1.0,
				1.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 2.0, 3.0, 3.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
				2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 61.0, 61.0, 80.0, 3.0, 3.0,
				3.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.0, 1.0, 0.0,
				0.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 1.0, 1.0, 0.0, 1.0, 0.0, 3.0, 3.0, 3.0, 3.0,
				3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 3.0, 2.0, 2.0, 3.0, 3.0, 3.0,
				3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 3.0, 3.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
			],
			windspeed_10m: [
				2.6, 2.4, 2.8, 2.6, 2.4, 2.6, 3.2, 3.6, 3.9, 4.9, 5.7, 6.8, 8.0, 9.5, 5.8, 5.1, 6.0, 8.2,
				7.3, 6.7, 6.8, 4.6, 4.1, 3.3, 2.7, 2.0, 1.8, 2.3, 2.4, 2.8, 2.3, 3.2, 3.8, 4.1, 4.4, 4.9,
				5.5, 6.6, 5.8, 6.4, 6.6, 7.6, 9.2, 6.1, 2.6, 7.0, 7.5, 6.5, 4.0, 3.2, 4.9, 6.3, 5.2, 4.0,
				4.6, 5.5, 5.3, 4.8, 4.0, 5.1, 4.9, 4.5, 5.2, 5.4, 5.9, 6.6, 7.5, 8.3, 9.3, 7.0, 8.3, 7.0,
				6.6, 5.0, 5.3, 5.7, 5.9, 6.6, 6.2, 7.0, 7.4, 9.4, 9.8, 9.8, 9.0, 8.7, 8.4, 7.0, 8.2, 8.3,
				7.6, 6.7, 4.9, 3.2, 4.3, 4.3, 3.7, 4.3, 4.5, 4.3, 4.1, 4.3, 5.2, 7.7, 8.4, 9.0, 10.3, 9.9,
				9.9, 11.3, 11.5, 12.6, 11.3, 9.4, 10.2, 9.5, 7.4, 5.7, 5.9, 5.1, 5.4, 4.2, 4.4, 4.1, 3.7,
				4.1, 4.3, 4.5, 4.6, 5.3, 6.1, 6.3, 6.1, 6.1, 6.3, 6.3, 5.9, 5.9, 5.3, 5.4, 4.6, 2.5, 1.8,
				1.8, 1.6, 1.9, 2.2, 1.8, 1.6, 1.8, 1.7, 1.3, 1.7, 2.0, 3.5, 3.1, 2.7, 3.1, 2.7, 2.7, 2.5,
				2.6, 3.2, 2.1, 0.6, 1.5, 2.3, 2.3, 2.2, 2.2, 2.3, 2.5, 2.2, 2.1, 1.9, 1.4, 1.2, 1.6, 1.8,
				1.6, 2.0, 2.1, 2.4, 2.1, 2.6, 2.1, 2.3, 3.1, 3.0, 2.5, 3.7, 4.7,
			],
			winddirection_10m: [
				9.0, 346.0, 344.0, 333.0, 325.0, 306.0, 308.0, 299.0, 303.0, 299.0, 294.0, 305.0, 319.0,
				305.0, 303.0, 313.0, 327.0, 304.0, 287.0, 292.0, 323.0, 303.0, 315.0, 324.0, 330.0, 343.0,
				288.0, 246.0, 261.0, 282.0, 250.0, 256.0, 258.0, 251.0, 232.0, 241.0, 247.0, 249.0, 272.0,
				256.0, 238.0, 251.0, 278.0, 288.0, 297.0, 321.0, 329.0, 333.0, 325.0, 313.0, 315.0, 315.0,
				315.0, 317.0, 306.0, 321.0, 321.0, 320.0, 317.0, 307.0, 304.0, 301.0, 301.0, 300.0, 302.0,
				291.0, 298.0, 300.0, 309.0, 306.0, 311.0, 316.0, 308.0, 298.0, 278.0, 280.0, 278.0, 282.0,
				275.0, 276.0, 270.0, 288.0, 291.0, 295.0, 289.0, 297.0, 301.0, 284.0, 304.0, 295.0, 288.0,
				287.0, 275.0, 232.0, 278.0, 280.0, 270.0, 270.0, 268.0, 260.0, 245.0, 227.0, 211.0, 227.0,
				252.0, 264.0, 302.0, 306.0, 298.0, 305.0, 306.0, 307.0, 309.0, 307.0, 317.0, 313.0, 311.0,
				311.0, 302.0, 299.0, 305.0, 304.0, 293.0, 289.0, 279.0, 275.0, 270.0, 272.0, 282.0, 268.0,
				287.0, 288.0, 288.0, 292.0, 286.0, 292.0, 302.0, 304.0, 298.0, 311.0, 320.0, 321.0, 319.0,
				347.0, 360.0, 53.0, 80.0, 103.0, 104.0, 131.0, 144.0, 207.0, 249.0, 264.0, 273.0, 277.0,
				266.0, 266.0, 262.0, 270.0, 270.0, 261.0, 284.0, 304.0, 252.0, 113.0, 114.0, 132.0, 142.0,
				153.0, 160.0, 157.0, 165.0, 175.0, 180.0, 188.0, 189.0, 173.0, 186.0, 194.0, 191.0, 236.0,
				279.0, 304.0, 333.0, 360.0, 24.0, 35.0, 58.0, 72.0, 72.0, 88.0,
			],
			windgusts_10m: [
				5.8, 5.1, 4.9, 5.6, 5.1, 5.6, 6.4, 7.8, 9.1, 11.3, 13.4, 15.9, 17.9, 21.6, 21.0, 17.5, 18.7,
				21.6, 21.2, 17.9, 14.8, 14.8, 9.7, 8.6, 6.8, 5.6, 4.3, 4.7, 6.0, 6.2, 5.6, 6.6, 8.0, 9.3,
				10.9, 11.5, 13.6, 16.1, 16.9, 15.6, 15.6, 19.4, 20.2, 21.2, 13.8, 15.0, 17.7, 16.3, 13.6,
				8.2, 8.6, 14.6, 13.6, 11.3, 10.1, 12.4, 12.2, 12.2, 11.7, 11.9, 13.0, 12.6, 12.1, 13.0,
				14.6, 14.6, 17.3, 23.7, 19.4, 20.2, 19.0, 17.9, 15.2, 14.2, 10.9, 12.6, 12.6, 14.2, 13.8,
				15.6, 16.9, 20.8, 21.6, 24.5, 22.5, 21.4, 23.5, 18.7, 23.5, 22.5, 18.9, 16.9, 16.1, 10.3,
				8.9, 9.7, 9.3, 8.7, 9.1, 9.7, 9.1, 9.1, 11.3, 16.5, 19.4, 23.7, 24.3, 23.9, 22.4, 26.4,
				30.1, 30.1, 29.7, 29.2, 26.2, 23.3, 21.4, 15.9, 12.2, 13.6, 11.7, 11.5, 9.5, 9.5, 8.6, 8.4,
				8.9, 10.1, 11.3, 12.1, 14.2, 15.9, 15.4, 14.6, 15.4, 16.1, 15.2, 14.2, 14.0, 14.2, 12.4,
				9.9, 5.1, 3.7, 4.3, 5.1, 4.3, 4.3, 3.7, 3.9, 3.7, 3.5, 4.5, 5.1, 8.7, 9.3, 8.7, 8.4, 8.7,
				7.6, 8.4, 6.8, 8.4, 8.0, 5.4, 2.7, 4.5, 4.7, 4.5, 4.5, 4.9, 4.9, 4.7, 4.5, 4.1, 3.7, 3.3,
				5.4, 6.0, 6.0, 6.8, 7.0, 7.2, 7.4, 7.6, 7.4, 6.8, 8.2, 8.2, 6.8, 7.8, 10.1,
			],
		},
		daily_units: {
			time: 'iso8601',
			weathercode: 'wmo code',
			temperature_2m_max: '°C',
			temperature_2m_min: '°C',
			precipitation_sum: 'mm',
		},
		daily: {
			time: [
				'2022-07-12',
				'2022-07-13',
				'2022-07-14',
				'2022-07-15',
				'2022-07-16',
				'2022-07-17',
				'2022-07-18',
				'2022-07-19',
			],
			weathercode: [5.0, 3.0, 3.0, 3.0, 80.0, 3.0, 3.0, 3.0],
			temperature_2m_max: [26.4, 29.9, 23.9, 19.9, 21.4, 23.0, 27.7, 34.2],
			temperature_2m_min: [12.1, 16.4, 15.6, 12.2, 14.6, 10.6, 15.5, 18.0],
			precipitation_sum: [0.0, 0.0, 0.0, 0.0, 2.1, 0.0, 0.0, 0.0],
		},
	};
	let hour = new Date().getHours();
	let times = weatherdata.hourly.time.slice(0 + hour, 12 + hour);
	let temps = weatherdata.hourly.temperature_2m.slice(0 + hour, 12 + hour);
	let temp = weatherdata.current_weather.temperature;
	let wind = weatherdata.current_weather.windspeed;
	let maxtemp = weatherdata.daily.temperature_2m_max;
	let mintemp = weatherdata.daily.temperature_2m_min;
	let humidity = weatherdata.hourly.relativehumidity_2m[hour];
	let dates = weatherdata.daily.time;
	let precipitation = weatherdata.daily.precipitation_sum[0];
	let icon = weatherdata.current_weather.weathercode;
	let weathercodes = weatherdata.hourly.weathercode.slice(0 + hour, 12 + hour);
	const dateTime = new Date(weatherdata.current_weather.time);
	let date = dateTime.toLocaleDateString($page.params.lang, {
		weekday: 'long',
		month: 'short',
		day: 'numeric',
	});
	function gethour(timestamp: string) {
		let date = new Date(timestamp);
		let hour = date.getHours().toString().padStart(2, '0') + ':00';
		return hour;
	}
	function getdate(timestamp: string) {
		return new Date(timestamp).toLocaleDateString($page.params.lang, {
			weekday: 'long',
			day: 'numeric',
		});
	}
	function geticon(weathercode: number, night: boolean, baseurl: string, fileext: string): string {
		if (night) {
			baseurl += 'night/';
		} else {
			baseurl += 'day/';
		}

		let icon: string;

		switch (weathercode) {
			case 0:
				icon = 'clear-sky';
				break;
			case 1:
				icon = 'mainly-clear';
				break;
			case 2:
				icon = 'partly-cloudy';
				break;
			case 3:
				icon = 'overcast';
				break;
			case 45:
			case 48:
				icon = 'fog';
				break;
			case 51:
			case 53:
			case 55:
			case 56:
			case 57:
				icon = 'drizzle';
				break;
			case 61:
			case 63:
			case 65:
			case 66:
			case 67:
				icon = 'rain';
				break;
			case 71:
			case 73:
			case 75:
			case 77:
				icon = 'snow';
				break;
			case 80:
			case 81:
			case 82:
				icon = 'rain-showers';
				break;
			case 85:
			case 86:
				icon = 'snow-showers';
				break;
			case 95:
				icon = 'thunderstorm';
				break;
			case 96:
			case 99:
				icon = 'thunderstorm-hail';
				break;
			default:
				icon = 'clear-sky';
		}
		return baseurl + icon + fileext;
	}
	function hslToRgb(h: number, s: number, l: number) {
		var r, g, b;

		if (s == 0) {
			r = g = b = l; // achromatic
		} else {
			var hue2rgb = function hue2rgb(p, q, t) {
				if (t < 0) t += 1;
				if (t > 1) t -= 1;
				if (t < 1 / 6) return p + (q - p) * 6 * t;
				if (t < 1 / 2) return q;
				if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
				return p;
			};

			var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
			var p = 2 * l - q;
			r = hue2rgb(p, q, h + 1 / 3);
			g = hue2rgb(p, q, h);
			b = hue2rgb(p, q, h - 1 / 3);
		}

		return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
	}
	function picktempcolor(temp: number, style: boolean = true, a: number = 1): string | number[] {
		temp = Math.round(temp);

		var hue = 30 + (240 * (30 - temp)) / 60;
		if (style) {
			return `hsla(${hue}, 100%, 50%, ${a})`;
		} else {
			return hslToRgb(hue, 100, 50);
		}
	}
</script>

<div
	style={'background: ' +
		picktempcolor(temp, true, 0.4) +
		'; background: linear-gradient(185deg,' +
		picktempcolor(temp, true, 0.4) +
		'0%,rgba(0, 0, 0, 0) 15%,rgba(0, 0, 0, 0) 100%);'}
	class="h-full flex flex-col justify-center"
>
	<nav class="flex flex-row justify-between p-4">
		<h1 class="text-2xl">{$page.params.lat}, {$page.params.long}</h1>

		<div class="flex flex-row">
			<!-- TODO: add click logic -->
			<button class="mx-1">
				<svg
					class="h-6 w-6"
					viewBox="0 0 24 24"
					width="24"
					height="24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<path
						d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
					/>
				</svg>
			</button>
			<button class="mx-1">
				<svg
					class="h-6 w-6"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<line x1="18" y1="6" x2="6" y2="18" />
					<line x1="6" y1="6" x2="18" y2="18" />
				</svg>
			</button>
		</div>
	</nav>
	<main class="w-full flex flex-col items-center">
		<img
			class="w-1/2 pb-0 mb-0"
			src={geticon(
				icon,
				new Date(weatherdata.current_weather.time).getHours() < 7 ||
					new Date(weatherdata.current_weather.time).getHours() > 21,
				'/weathericons/outlined/animated/',
				'.svg'
			)}
			alt="weathericon"
		/>
		<h1 class="text-8xl font-thin pt-0 mt-0">{temp.toFixed(0).toString().padStart(2, '0')}°C</h1>
		<div class="w-full flex justify-around mt-2">
			<div class="flex justify-center">
				<img
					class="w-16 -ml-5"
					src="/weathericons/extra/raindrop-measure.png"
					alt="precipitation"
				/>
				<div class="flex flex-col h-full items-center justify-center">
					<h1 class="text-2xl font-thin">{precipitation.toString().padStart(2, '0')}</h1>
					<h1 class="text-sm font-thin">mm</h1>
				</div>
			</div>
			<div class="flex justify-center">
				<img class="w-16 -ml-5" src="/weathericons/extra/humidity.png" alt="humidit" />
				<div class="flex flex-col h-full items-center justify-center">
					<h1 class="text-2xl font-thin">{humidity.toString().padStart(2, '0')}</h1>
					<h1 class="text-sm font-thin">%</h1>
				</div>
			</div>
			<div class="flex justify-center">
				<img
					class="w-16 -ml-5"
					src={wind < 7
						? '/weathericons/extra/windsock-weak.svg'
						: '/weathericons/extra/windsock.svg'}
					alt="precipitation"
				/>
				<div class="flex flex-col h-full items-center justify-center">
					<h1 class="text-2xl font-thin">{wind.toFixed(0).toString().padStart(2, '0')}</h1>
					<h1 class="text-sm font-thin">kt</h1>
				</div>
			</div>
		</div>
		<div class="mt-8 w-full flex flex-col items-center">
			<div class="flex w-full justify-between">
				<h1 class="mt-4 ml-4 text-xl font-regular self-start">
					{date}
				</h1>
				<h1 class="mt-4 mr-4 text-xl font-regular self-end">
							<span class="mr-4">{mintemp[0].toFixed(0).padStart(2, '0')}°C</span>
							<span>{maxtemp[0].toFixed(0).padStart(2, '0')}°C</span>
						</h1>
			</div>
			<div class="px-1 w-full flex items-center">
				<div
					class="w-full"
					style={'height: 2px; margin-left: 8px; margin-right: 8px; background-color: ' +
						picktempcolor(temp, true, 0.4) +
						';'}
				/>
			</div>
			<table class="w-full max-w-max flex overflow-x-auto mt-4">
				<tr class="">
					{#each Array(12) as _, i}
						<td class="mb-4">
							<h1 class="px-4">{gethour(times[i])}</h1>
							<img
								class="w-20 pb-0 mb-0"
								src={geticon(
									weathercodes[i],
									new Date(times[i]).getHours() < 7 || new Date(times[i]).getHours() > 21,
									'/weathericons/outlined/animated/',
									'.svg'
								)}
								width="80"
								height="80"
								alt="weathericon"
							/>
							<h1 class="px-4">{temps[i].toFixed(0)}°C</h1>
						</td>
					{/each}
				</tr>
			</table>
			<div class="divider p-0 m-0" />
			<h1 class="text-lg mt-6 mb-2">7 tage vorhersage</h1>
			{#each Array(7) as _, i}
				<div class="flex w-full justify-between items-center">
					<h1 class=" ml-2 text-base font-regular">
						{getdate(dates[i + 1])}
					</h1>
					<div class="flex items-center">
						<img
							class="mr-2"
							height="50"
							width="50"
							src={geticon(
								weatherdata.daily.weathercode[i + 1],
								false,
								'/weathericons/mono/',
								'.webp'
							)}
							alt="weathericon"
						/>
						<h1 class="mr-2 text-base">
							<span class="mr-2">{mintemp[i + 1].toFixed(0).padStart(2, '0')}°C</span>
							<span>{maxtemp[i + 1].toFixed(0).padStart(2, '0')}°C</span>
						</h1>
					</div>
				</div>
				<div class="divider p-0 m-0" />
			{/each}
		</div>
	</main>
</div>
