<script context="module">
	export async function load({ params, fetch }) {
		const lat = params.lat;
		const long = params.long;
		const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${long}&hourly=temperature_2m,relativehumidity_2m,surface_pressure,precipitation,weathercode,windspeed_10m,winddirection_10m,windgusts_10m&current_weather=true&windspeed_unit=kn`;
		const res = await fetch(url);
		return {
			status: res.status,
			props: {
				weatherdata: res.ok && (await res.json())
			}
		};
	}
</script>

<script lang=ts>
	import Stats from '$lib/Stats.svelte';

	import Forecast from '$lib/Forecast.svelte';
	import MobileForecast from '$lib/MobileForecast.svelte';
	import { page } from '$app/stores';
	import { t } from '$lib/translations';

	const lat = $page.params.lat;
	const long = $page.params.long;

	let title = `${lat}, ${long}`;
	let route = $page.url.pathname;

	export let weatherdata = {
		latitude: 52.760002,
		longitude: 13.639999,
		elevation: 54.0,
		generationtime_ms: 2.364993095397949,
		utc_offset_seconds: 0,
		current_weather: {
			temperature: 16.4,
			windspeed: 9.5,
			winddirection: 298.0,
			weathercode: 3.0,
			time: '2022-07-10T10:00'
		},
		hourly: {
			surface_pressure: [
				1012.6, 1013.4, 1013.0, 1012.0, 1012.0, 1011.9, 1011.2, 1011.8, 1011.7, 1011.7, 1011.9,
				1012.1, 1012.0, 1011.7, 1011.7, 1011.7, 1011.5, 1011.4, 1011.2, 1011.3, 1011.6, 1012.0,
				1012.1, 1012.2, 1012.1, 1012.0, 1012.1, 1012.4, 1012.6, 1012.9, 1013.2, 1013.4, 1013.5,
				1013.7, 1013.7, 1013.5, 1013.3, 1013.4, 1013.3, 1013.1, 1013.3, 1013.4, 1013.7, 1013.9,
				1014.0, 1014.3, 1014.5, 1014.7, 1014.7, 1014.7, 1014.9, 1015.0, 1015.3, 1015.6, 1015.7,
				1016.0, 1015.8, 1015.7, 1015.7, 1015.4, 1014.9, 1014.5, 1014.1, 1013.6, 1013.5, 1013.3,
				1013.2, 1013.0, 1013.1, 1013.1, 1013.0, 1012.9, 1012.9, 1012.6, 1012.2, 1011.9, 1011.6,
				1011.5, 1011.6, 1011.4, 1011.3, 1011.0, 1010.9, 1010.7, 1010.3, 1010.0, 1009.6, 1009.3,
				1009.1, 1008.8, 1008.7, 1008.9, 1009.3, 1009.9, 1010.5, 1011.1, 1011.9, 1012.4, 1012.7,
				1013.2, 1013.6, 1013.9, 1014.3, 1014.3, 1014.1, 1014.0, 1013.8, 1013.6, 1013.2, 1013.0,
				1012.7, 1012.6, 1012.4, 1012.4, 1012.4, 1012.5, 1012.6, 1012.8, 1012.9, 1012.9, 1013.0,
				1013.0, 1013.0, 1013.1, 1013.3, 1013.6, 1014.0, 1015.8, 1015.9, 1015.9, 1015.9, 1015.9,
				1015.8, 1015.7, 1015.6, 1015.6, 1015.6, 1015.6, 1015.6, 1015.7, 1015.8, 1016.0, 1016.2,
				1016.6, 1016.9, 1017.0, 1017.0, 1017.1, 1017.3, 1017.6, 1017.8, 1018.0, 1018.2, 1018.2,
				1018.1, 1017.8, 1017.6, 1017.3, 1017.0, 1016.6, 1016.6, 1016.6, 1016.6, 1016.7, 1016.8,
				1016.9, 1016.9, 1017.0
			],
			winddirection_10m: [
				272.0, 272.0, 276.0, 284.0, 275.0, 279.0, 291.0, 297.0, 305.0, 301.0, 298.0, 302.0, 300.0,
				294.0, 304.0, 312.0, 310.0, 307.0, 304.0, 300.0, 287.0, 295.0, 288.0, 284.0, 286.0, 294.0,
				289.0, 284.0, 286.0, 288.0, 284.0, 291.0, 303.0, 309.0, 309.0, 305.0, 307.0, 313.0, 319.0,
				342.0, 336.0, 320.0, 321.0, 333.0, 322.0, 309.0, 311.0, 297.0, 287.0, 287.0, 285.0, 297.0,
				294.0, 292.0, 299.0, 301.0, 309.0, 313.0, 321.0, 321.0, 315.0, 311.0, 317.0, 310.0, 295.0,
				290.0, 280.0, 279.0, 288.0, 294.0, 288.0, 274.0, 270.0, 257.0, 251.0, 249.0, 236.0, 238.0,
				247.0, 247.0, 264.0, 261.0, 265.0, 258.0, 246.0, 247.0, 252.0, 257.0, 249.0, 240.0, 243.0,
				282.0, 313.0, 325.0, 321.0, 310.0, 297.0, 292.0, 290.0, 286.0, 281.0, 277.0, 275.0, 278.0,
				283.0, 287.0, 289.0, 291.0, 293.0, 293.0, 292.0, 292.0, 291.0, 293.0, 295.0, 292.0, 288.0,
				282.0, 282.0, 284.0, 286.0, 286.0, 283.0, 283.0, 283.0, 280.0, 279.0, 293.0, 292.0, 293.0,
				293.0, 296.0, 299.0, 300.0, 301.0, 303.0, 306.0, 311.0, 317.0, 307.0, 276.0, 233.0, 236.0,
				297.0, 346.0, 360.0, 8.0, 9.0, 9.0, 360.0, 337.0, 315.0, 297.0, 294.0, 300.0, 311.0, 324.0,
				340.0, 360.0, 25.0, 35.0, 43.0, 52.0, 60.0, 72.0, 82.0, 90.0, 90.0
			],
			windgusts_10m: [
				10.5, 11.9, 13.6, 13.6, 15.4, 15.9, 15.7, 16.7, 17.3, 17.9, 18.7, 19.2, 19.4, 18.9, 22.0,
				20.8, 19.2, 18.1, 14.0, 10.7, 6.6, 6.0, 5.6, 5.6, 7.6, 8.0, 6.8, 6.0, 6.6, 9.1, 11.3, 13.2,
				14.6, 14.8, 14.6, 13.8, 15.6, 17.9, 19.2, 16.9, 16.9, 12.6, 11.3, 7.0, 6.0, 4.1, 4.1, 3.7,
				3.3, 3.3, 3.5, 3.7, 4.1, 5.8, 8.9, 12.8, 12.8, 14.4, 15.4, 15.2, 15.6, 16.9, 16.1, 17.5,
				18.3, 16.7, 15.9, 8.7, 8.2, 7.2, 6.8, 5.8, 6.4, 7.0, 7.0, 7.0, 7.0, 7.8, 9.3, 10.7, 11.7,
				13.4, 13.8, 10.5, 10.1, 9.3, 8.7, 8.0, 7.6, 7.0, 6.6, 10.3, 13.8, 17.3, 15.9, 14.4, 12.8,
				13.0, 13.0, 13.2, 14.2, 15.2, 16.1, 18.7, 21.4, 23.9, 24.3, 24.5, 24.9, 24.1, 23.3, 22.4,
				21.6, 20.8, 20.0, 16.5, 13.0, 9.3, 9.9, 10.5, 10.9, 10.7, 10.5, 10.3, 11.7, 13.0, 14.4,
				17.5, 18.5, 19.2, 18.9, 18.5, 18.1, 17.5, 16.7, 16.1, 15.2, 14.0, 13.0, 9.7, 6.4, 3.3, 3.1,
				2.7, 2.5, 2.1, 1.9, 1.6, 2.1, 2.9, 3.5, 5.1, 6.4, 8.0, 8.6, 8.9, 9.5, 9.3, 9.1, 8.9, 8.4,
				7.8, 7.4, 6.6, 6.0, 5.2, 5.2, 5.2
			],
			temperature_2m: [
				12.2, 12.0, 11.9, 12.2, 11.9, 12.1, 12.7, 14.0, 14.7, 15.7, 16.4, 17.8, 18.6, 19.4, 19.6,
				19.7, 19.2, 18.4, 17.7, 15.8, 13.8, 12.7, 12.1, 12.0, 11.9, 11.3, 10.5, 9.9, 10.3, 12.1,
				14.1, 16.1, 17.9, 19.1, 20.0, 20.4, 21.6, 21.6, 21.6, 21.8, 21.0, 21.1, 19.9, 18.2, 16.1,
				14.9, 13.7, 12.4, 11.8, 11.1, 10.7, 10.6, 11.0, 13.0, 15.4, 17.6, 19.7, 21.5, 22.8, 23.8,
				24.3, 24.6, 25.0, 25.2, 24.9, 24.3, 23.0, 20.5, 18.6, 17.8, 17.2, 16.4, 16.3, 16.4, 16.3,
				16.1, 16.4, 17.4, 18.8, 20.0, 20.8, 21.2, 20.2, 20.2, 20.2, 20.4, 20.7, 21.0, 21.2, 21.4,
				21.2, 20.7, 19.9, 18.6, 17.5, 16.3, 14.7, 13.3, 11.9, 10.8, 11.2, 12.3, 14.0, 15.3, 16.7,
				18.3, 19.2, 20.0, 20.8, 21.3, 21.8, 21.9, 21.6, 20.9, 19.5, 18.2, 16.5, 14.6, 13.6, 12.8,
				11.9, 11.1, 10.3, 9.9, 10.7, 12.0, 13.4, 14.6, 15.9, 17.6, 18.4, 19.1, 19.9, 20.4, 20.8,
				21.0, 20.9, 20.7, 19.7, 18.2, 16.1, 13.9, 13.2, 12.9, 12.8, 12.7, 12.7, 13.1, 13.8, 14.8,
				16.3, 17.6, 19.0, 20.6, 21.6, 22.5, 23.4, 23.9, 24.3, 24.5, 24.3, 23.8, 22.6, 20.9, 18.7,
				16.3, 15.3, 14.7
			],
			precipitation: [
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 0.0, 0.0
			],
			time: [
				'2022-07-10T00:00',
				'2022-07-10T01:00',
				'2022-07-10T02:00',
				'2022-07-10T03:00',
				'2022-07-10T04:00',
				'2022-07-10T05:00',
				'2022-07-10T06:00',
				'2022-07-10T07:00',
				'2022-07-10T08:00',
				'2022-07-10T09:00',
				'2022-07-10T10:00',
				'2022-07-10T11:00',
				'2022-07-10T12:00',
				'2022-07-10T13:00',
				'2022-07-10T14:00',
				'2022-07-10T15:00',
				'2022-07-10T16:00',
				'2022-07-10T17:00',
				'2022-07-10T18:00',
				'2022-07-10T19:00',
				'2022-07-10T20:00',
				'2022-07-10T21:00',
				'2022-07-10T22:00',
				'2022-07-10T23:00',
				'2022-07-11T00:00',
				'2022-07-11T01:00',
				'2022-07-11T02:00',
				'2022-07-11T03:00',
				'2022-07-11T04:00',
				'2022-07-11T05:00',
				'2022-07-11T06:00',
				'2022-07-11T07:00',
				'2022-07-11T08:00',
				'2022-07-11T09:00',
				'2022-07-11T10:00',
				'2022-07-11T11:00',
				'2022-07-11T12:00',
				'2022-07-11T13:00',
				'2022-07-11T14:00',
				'2022-07-11T15:00',
				'2022-07-11T16:00',
				'2022-07-11T17:00',
				'2022-07-11T18:00',
				'2022-07-11T19:00',
				'2022-07-11T20:00',
				'2022-07-11T21:00',
				'2022-07-11T22:00',
				'2022-07-11T23:00',
				'2022-07-12T00:00',
				'2022-07-12T01:00',
				'2022-07-12T02:00',
				'2022-07-12T03:00',
				'2022-07-12T04:00',
				'2022-07-12T05:00',
				'2022-07-12T06:00',
				'2022-07-12T07:00',
				'2022-07-12T08:00',
				'2022-07-12T09:00',
				'2022-07-12T10:00',
				'2022-07-12T11:00',
				'2022-07-12T12:00',
				'2022-07-12T13:00',
				'2022-07-12T14:00',
				'2022-07-12T15:00',
				'2022-07-12T16:00',
				'2022-07-12T17:00',
				'2022-07-12T18:00',
				'2022-07-12T19:00',
				'2022-07-12T20:00',
				'2022-07-12T21:00',
				'2022-07-12T22:00',
				'2022-07-12T23:00',
				'2022-07-13T00:00',
				'2022-07-13T01:00',
				'2022-07-13T02:00',
				'2022-07-13T03:00',
				'2022-07-13T04:00',
				'2022-07-13T05:00',
				'2022-07-13T06:00',
				'2022-07-13T07:00',
				'2022-07-13T08:00',
				'2022-07-13T09:00',
				'2022-07-13T10:00',
				'2022-07-13T11:00',
				'2022-07-13T12:00',
				'2022-07-13T13:00',
				'2022-07-13T14:00',
				'2022-07-13T15:00',
				'2022-07-13T16:00',
				'2022-07-13T17:00',
				'2022-07-13T18:00',
				'2022-07-13T19:00',
				'2022-07-13T20:00',
				'2022-07-13T21:00',
				'2022-07-13T22:00',
				'2022-07-13T23:00',
				'2022-07-14T00:00',
				'2022-07-14T01:00',
				'2022-07-14T02:00',
				'2022-07-14T03:00',
				'2022-07-14T04:00',
				'2022-07-14T05:00',
				'2022-07-14T06:00',
				'2022-07-14T07:00',
				'2022-07-14T08:00',
				'2022-07-14T09:00',
				'2022-07-14T10:00',
				'2022-07-14T11:00',
				'2022-07-14T12:00',
				'2022-07-14T13:00',
				'2022-07-14T14:00',
				'2022-07-14T15:00',
				'2022-07-14T16:00',
				'2022-07-14T17:00',
				'2022-07-14T18:00',
				'2022-07-14T19:00',
				'2022-07-14T20:00',
				'2022-07-14T21:00',
				'2022-07-14T22:00',
				'2022-07-14T23:00',
				'2022-07-15T00:00',
				'2022-07-15T01:00',
				'2022-07-15T02:00',
				'2022-07-15T03:00',
				'2022-07-15T04:00',
				'2022-07-15T05:00',
				'2022-07-15T06:00',
				'2022-07-15T07:00',
				'2022-07-15T08:00',
				'2022-07-15T09:00',
				'2022-07-15T10:00',
				'2022-07-15T11:00',
				'2022-07-15T12:00',
				'2022-07-15T13:00',
				'2022-07-15T14:00',
				'2022-07-15T15:00',
				'2022-07-15T16:00',
				'2022-07-15T17:00',
				'2022-07-15T18:00',
				'2022-07-15T19:00',
				'2022-07-15T20:00',
				'2022-07-15T21:00',
				'2022-07-15T22:00',
				'2022-07-15T23:00',
				'2022-07-16T00:00',
				'2022-07-16T01:00',
				'2022-07-16T02:00',
				'2022-07-16T03:00',
				'2022-07-16T04:00',
				'2022-07-16T05:00',
				'2022-07-16T06:00',
				'2022-07-16T07:00',
				'2022-07-16T08:00',
				'2022-07-16T09:00',
				'2022-07-16T10:00',
				'2022-07-16T11:00',
				'2022-07-16T12:00',
				'2022-07-16T13:00',
				'2022-07-16T14:00',
				'2022-07-16T15:00',
				'2022-07-16T16:00',
				'2022-07-16T17:00',
				'2022-07-16T18:00',
				'2022-07-16T19:00',
				'2022-07-16T20:00',
				'2022-07-16T21:00',
				'2022-07-16T22:00',
				'2022-07-16T23:00'
			],
			relativehumidity_2m: [
				79.0, 81.0, 83.0, 81.0, 82.0, 84.0, 82.0, 76.0, 71.0, 65.0, 62.0, 56.0, 52.0, 45.0, 44.0,
				43.0, 41.0, 44.0, 49.0, 56.0, 68.0, 72.0, 74.0, 76.0, 78.0, 83.0, 90.0, 94.0, 95.0, 90.0,
				84.0, 77.0, 68.0, 59.0, 54.0, 50.0, 45.0, 42.0, 39.0, 41.0, 45.0, 46.0, 51.0, 59.0, 70.0,
				72.0, 72.0, 76.0, 79.0, 81.0, 83.0, 83.0, 84.0, 78.0, 70.0, 63.0, 59.0, 50.0, 43.0, 39.0,
				37.0, 38.0, 36.0, 37.0, 41.0, 43.0, 50.0, 62.0, 73.0, 77.0, 79.0, 82.0, 82.0, 80.0, 80.0,
				81.0, 80.0, 78.0, 73.0, 69.0, 68.0, 67.0, 74.0, 76.0, 76.0, 76.0, 75.0, 74.0, 76.0, 78.0,
				80.0, 80.0, 80.0, 79.0, 78.0, 76.0, 75.0, 78.0, 83.0, 87.0, 86.0, 83.0, 77.0, 71.0, 63.0,
				54.0, 50.0, 47.0, 44.0, 41.0, 39.0, 37.0, 37.0, 39.0, 43.0, 48.0, 55.0, 63.0, 69.0, 74.0,
				80.0, 84.0, 88.0, 90.0, 87.0, 82.0, 76.0, 75.0, 65.0, 54.0, 49.0, 46.0, 43.0, 42.0, 41.0,
				41.0, 41.0, 42.0, 47.0, 54.0, 63.0, 73.0, 76.0, 77.0, 77.0, 76.0, 74.0, 71.0, 70.0, 69.0,
				67.0, 64.0, 59.0, 54.0, 50.0, 47.0, 44.0, 42.0, 41.0, 40.0, 41.0, 42.0, 46.0, 53.0, 61.0,
				70.0, 74.0, 77.0
			],
			weathercode: [
				2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 80.0, 2.0, 3.0, 3.0, 3.0, 2.0, 2.0, 3.0, 2.0, 2.0, 2.0, 2.0,
				2.0, 2.0, 1.0, 0.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 3.0, 3.0,
				2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 1.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 0.0, 3.0, 3.0, 3.0, 3.0, 3.0,
				3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 61.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
				3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 3.0, 3.0,
				3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 0.0, 0.0, 0.0, 2.0, 2.0, 2.0, 3.0, 3.0,
				3.0, 2.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 0.0, 0.0, 0.0, 3.0, 3.0, 3.0, 3.0, 3.0,
				3.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0,
				0.0, 0.0, 0.0, 0.0, 1.0, 1.0
			],
			windspeed_10m: [
				5.8, 6.4, 7.0, 8.0, 8.4, 8.5, 9.2, 8.7, 9.2, 9.3, 9.5, 10.0, 9.8, 9.0, 10.1, 8.9, 9.7, 7.5,
				5.9, 3.8, 3.3, 3.2, 3.1, 3.2, 4.2, 3.8, 3.5, 3.2, 3.6, 4.9, 5.6, 6.6, 7.4, 7.5, 7.0, 6.4,
				7.8, 8.8, 8.8, 7.7, 6.6, 5.8, 4.0, 3.5, 2.2, 2.5, 2.1, 2.2, 2.0, 2.0, 2.2, 2.2, 2.3, 3.1,
				4.4, 5.7, 5.3, 6.3, 6.5, 6.2, 6.6, 7.2, 7.2, 7.9, 7.7, 7.4, 4.3, 3.9, 3.7, 3.4, 3.1, 2.7,
				3.3, 3.4, 3.5, 3.3, 3.5, 3.7, 4.4, 4.9, 5.3, 6.3, 4.9, 4.8, 4.3, 4.0, 3.7, 3.4, 3.3, 3.1,
				2.6, 2.8, 4.3, 6.4, 6.5, 6.1, 5.7, 5.7, 5.6, 5.7, 5.9, 6.5, 7.2, 8.2, 9.8, 11.2, 11.5, 11.7,
				11.6, 11.4, 10.9, 10.0, 9.2, 7.8, 6.4, 5.7, 5.1, 4.6, 4.6, 4.8, 5.0, 5.0, 5.0, 5.0, 5.4,
				5.7, 6.3, 9.3, 9.9, 10.1, 9.8, 9.3, 8.7, 8.5, 8.6, 8.3, 7.2, 5.9, 4.3, 2.9, 2.0, 1.9, 1.4,
				0.9, 1.6, 1.6, 1.4, 1.2, 1.2, 1.4, 1.5, 1.9, 2.6, 3.4, 3.8, 4.1, 4.3, 3.9, 3.5, 3.7, 3.8,
				3.7, 3.5, 3.1, 3.1, 2.9, 2.9, 2.9
			]
		},
		hourly_units: {
			temperature_2m: '°C',
			relativehumidity_2m: '%',
			winddirection_10m: '°',
			surface_pressure: 'hPa',
			precipitation: 'mm',
			windspeed_10m: 'kn',
			time: 'iso8601',
			windgusts_10m: 'kn',
			weathercode: 'wmo code'
		}
	};

    let width: number

	function geticon(weathercode, night, animated = false) {
		let baseurl;
		let fileext = '.webp';
		if (night) {
			baseurl = '/weathericons/static/night/';
			if (animated) {
				baseurl = '/weathericons/animated/night/';
				fileext = '.svg';
			}
		} else {
			baseurl = '/weathericons/static/day/';
			if (animated) {
				baseurl = '/weathericons/animated/day/';
				fileext = '.svg';
			}
		}

		let icon;

		switch (weathercode) {
			case 0:
				icon = 'clear-sky';
				break;
			case 1:
				icon = 'mainly-clear';
				break;
			case 2:
				icon = 'partly-cloudy';
				break;
			case 3:
				icon = 'overcast';
				break;
			case 45:
			case 48:
				icon = 'fog';
				break;
			case 51:
			case 53:
			case 55:
			case 56:
			case 57:
				icon = 'drizzle';
				break;
			case 61:
			case 63:
			case 65:
			case 66:
			case 67:
				icon = 'rain';
				break;
			case 71:
			case 73:
			case 75:
			case 77:
				icon = 'snow';
				break;
			case 80:
			case 81:
			case 82:
				icon = 'rain-showers';
				break;
			case 85:
			case 86:
				icon = 'snow-showers';
				break;
			case 95:
				icon = 'thunderstorm';
				break;
			case 96:
			case 99:
				icon = 'thunderstorm-hail';
				break;
			default:
				icon = 'clear-sky';
		}
		return baseurl + icon + fileext;
	}
</script>
<svelte:window bind:innerWidth={width} />


<svelte:head>
	<title>Wetter für {title}</title>
	<meta property="og:title" content={'Wetter für ' + title} />
	<meta property="og:url" content={'https://www.sailing-weather.de' + route} />
	<meta property="og:description" content={'Die beste Wettervorhersage für ' + title} />
	<meta property="twitter:url" content={'https://www.sailing-weather.de' + route} />
	<meta property="twitter:title" content={'Wetter für ' + title} />
	<meta property="twitter:description" content={'Die beste Wettervorhersage für ' + title} />
</svelte:head>

<div class="w-full flex flex-col items-center">
	<h1 class="text-2xl mb-1">{$t('all.heading')}</h1>
	<h1 class="text-2xl mb-2">{title}</h1>
	<Stats {weatherdata} />

	{#if width > 900}
		<div class="flex flex-col items-center">
			<Forecast data={weatherdata} day={0} class="my-6" />
			<Forecast data={weatherdata} day={1} class="my-6" />
			<Forecast data={weatherdata} day={2} class="my-6" />
			<div class="alert alert-info shadow-lg max-w-xl m-6">
				<div>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						class="stroke-current flex-shrink-0 w-6 h-6"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
						/>
					</svg>
					<span>{$t('all.warning')}</span>
				</div>
			</div>
			<Forecast data={weatherdata} day={3} class="my-6" />
			<Forecast data={weatherdata} day={4} class="my-6" />
			<Forecast data={weatherdata} day={5} class="my-6" />
			<Forecast data={weatherdata} day={6} class="my-6" />
		</div>
	{:else}
		<div class="flex flex-col items-center w-full">
			<MobileForecast data={weatherdata} day={0} class="my-6" />
			<MobileForecast data={weatherdata} day={1} class="my-6" />
			<MobileForecast data={weatherdata} day={2} class="my-6" />
			<div class="alert alert-info shadow-lg max-w-xl m-6">
				<div>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						class="stroke-current flex-shrink-0 w-6 h-6"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
						/>
					</svg>
					<span>{$t('all.warning')}</span>
				</div>
			</div>
			<MobileForecast data={weatherdata} day={3} class="my-6" />
			<MobileForecast data={weatherdata} day={4} class="my-6" />
			<MobileForecast data={weatherdata} day={5} class="my-6" />
			<MobileForecast data={weatherdata} day={6} class="my-6" />
		</div>
	{/if}
</div>
